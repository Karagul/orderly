<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Download dependent reports — orderly_pull_dependencies • orderly</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Download dependent reports — orderly_pull_dependencies" />
<meta property="og:description" content="Download dependent reports from an orderly remote.  This can only
be used if the orderly_config.yml lists a remote.  This
allows for a centralised workflow where a central orderly store
exists and holds the canonical copies of reports, from which
versions can be downloaded into local stores." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">orderly</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.18</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/orderly.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/changelog.html">orderly changelog</a>
    </li>
    <li>
      <a href="../articles/remote.html">orderly remotes</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/vimc/orderly/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Download dependent reports</h1>
    <small class="dont-index">Source: <a href='https://github.com/vimc/orderly/blob/master/R/remote.R'><code>R/remote.R</code></a></small>
    <div class="hidden name"><code>orderly_pull_dependencies.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Download dependent reports from an orderly remote.  This can only
be used if the <code>orderly_config.yml</code> lists a remote.  This
allows for a centralised workflow where a central orderly store
exists and holds the canonical copies of reports, from which
versions can be downloaded into local stores.</p>
    </div>

    <pre class="usage"><span class='fu'>orderly_pull_dependencies</span>(
  <span class='kw'>name</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>root</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>locate</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>remote</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)

<span class='fu'>orderly_pull_archive</span>(
  <span class='no'>name</span>,
  <span class='kw'>id</span> <span class='kw'>=</span> <span class='st'>"latest"</span>,
  <span class='kw'>root</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>locate</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>remote</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>name</th>
      <td><p>Name of the report to download dependencies for.
Alternatively, the default of <code>NULL</code> is useful if you have
already set the working directory to be the source directory.</p></td>
    </tr>
    <tr>
      <th>root</th>
      <td><p>The path to an orderly root directory, or <code>NULL</code>
(the default) to search for one from the current working
directory if <code>locate</code> is <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>locate</th>
      <td><p>Logical, indicating if the configuration should be
searched for.  If <code>TRUE</code> and <code>config</code> is not given,
then orderly looks in the working directory and up through its
parents until it finds an <code>orderly_config.yml</code> file.</p></td>
    </tr>
    <tr>
      <th>remote</th>
      <td><p>Description of the location.  Typically this is a
character string indicating a remote specified in the
<code>remotes</code> block of your <code>orderly_config.yml</code>.  It is
also possible to pass in a directly created remote object (e.g.,
using <code><a href='orderly_remote_path.html'>orderly_remote_path</a></code>, or one provided by
another package).  If left <code>NULL</code>, then the default remote
for this orderly repository is used - by default that is the
first listed remote.</p></td>
    </tr>
    <tr>
      <th>id</th>
      <td><p>The identifier (for <code>orderly_pull_archive</code>).  The default is
to use the latest report.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>No return value, these functions are called only for their
  side effects</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The <code>orderly_pull_archive</code> function pulls report directly
(without it being a dependent report).</p>
<p>After setting your username up you can run
<code>orderly_pull_dependencies("reportname")</code> to pull the
<em>dependencies</em> of <code>"reportname"</code> down so that
<code>"reportname"</code> can be run, or you can run
<code>orderly_pull_archive("reportname")</code> to pull a copy of
<code>"reportname"</code> that has been run on the remote server.</p>
<p>Pulling an archive report from a remote also pulls its
dependencies (recursively), and adds all of these to the local
database.  This may require migrating old orderly archives
(<code><a href='orderly_migrate.html'>orderly_migrate</a></code>).  Note that this migration will
likely fail for remote orderly versions older than 0.6.8 because
the migration needs to read data files on disk that are not
included in the downloaded archive in order to collect all the
information required for the database.  In this case, ask the
administrator of the remote orderly archive to migrate their
archive, and then re-pull.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='orderly_remote_path.html'>orderly_remote_path</a></code>, which implements the
  remote interface for orderly repositories at a local path.  See
  also <a href='https://github.com/vimc/orderly-web'>OrderlyWeb</a> for
  a system for hosting orderly repositories over an HTTP API.
  <code><a href='../articles/remote.html'>vignette("remote", package = "orderly")</a></code> describes the
  remote system in more detail.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Suppose we have a "remote" orderly repository at some path.</span>
<span class='co'># This might be read-only for you in practice and available via a</span>
<span class='co'># network filesystem or a dropbox folder synced to your computer.</span>
<span class='co'># We'll populate this with a pair of reports:</span>
<span class='no'>path_remote</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>orderly</span><span class='kw ns'>::</span><span class='fu'><a href='orderly_example.html'>orderly_example</a></span>(<span class='st'>"demo"</span>)
<span class='no'>id</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>orderly</span><span class='kw ns'>::</span><span class='fu'><a href='orderly_run.html'>orderly_run</a></span>(<span class='st'>"other"</span>, <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>nmin</span> <span class='kw'>=</span> <span class='fl'>0</span>),
                           <span class='kw'>root</span> <span class='kw'>=</span> <span class='no'>path_remote</span>, <span class='kw'>echo</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; <span class='message'>[ name       ]  other</span></div><div class='output co'>#&gt; <span class='message'>[ id         ]  20200403-103543-c8f58c87</span></div><div class='output co'>#&gt; <span class='message'>[ sources    ]  functions.R</span></div><div class='output co'>#&gt; <span class='message'>[ parameter  ]  nmin: 0</span></div><div class='output co'>#&gt; <span class='message'>[ data       ]  source =&gt; extract: 20 x 2</span></div><div class='output co'>#&gt; <span class='message'>[ start      ]  2020-04-03 10:35:43</span></div><div class='output co'>#&gt; <span class='message'>[ end        ]  2020-04-03 10:35:43</span></div><div class='output co'>#&gt; <span class='message'>[ elapsed    ]  Ran report in 0.01110744 secs</span></div><div class='output co'>#&gt; <span class='message'>[ artefact   ]  summary.csv: 01c70f6e51fab381154775c7e70ed7b3</span>
#&gt; <span class='message'>[ ...        ]  graph.png: 9918b4caa5f89dff21a92e8a4fdeb7c3</span></div><div class='input'><span class='kw pkg'>orderly</span><span class='kw ns'>::</span><span class='fu'><a href='orderly_commit.html'>orderly_commit</a></span>(<span class='no'>id</span>, <span class='kw'>root</span> <span class='kw'>=</span> <span class='no'>path_remote</span>)</div><div class='output co'>#&gt; <span class='message'>[ commit     ]  other/20200403-103543-c8f58c87</span></div><div class='output co'>#&gt; <span class='message'>[ copy       ]</span></div><div class='output co'>#&gt; <span class='message'>[ import     ]  other:20200403-103543-c8f58c87</span></div><div class='output co'>#&gt; <span class='message'>[ success    ]  :)</span></div><div class='output co'>#&gt; [1] "/tmp/Rtmp9iZLVY/file3d210fa02d/archive/other/20200403-103543-c8f58c87"</div><div class='input'><span class='no'>id</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>orderly</span><span class='kw ns'>::</span><span class='fu'><a href='orderly_run.html'>orderly_run</a></span>(<span class='st'>"use_dependency"</span>,
                           <span class='kw'>root</span> <span class='kw'>=</span> <span class='no'>path_remote</span>, <span class='kw'>echo</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; <span class='message'>[ name       ]  use_dependency</span></div><div class='output co'>#&gt; <span class='message'>[ id         ]  20200403-103544-0c2911e3</span></div><div class='output co'>#&gt; <span class='message'>[ depends    ]  other@20200403-103543-c8f58c87:summary.csv -&gt; incoming.csv</span></div><div class='output co'>#&gt; <span class='message'>[ start      ]  2020-04-03 10:35:44</span></div><div class='output co'>#&gt; <span class='message'>[ end        ]  2020-04-03 10:35:44</span></div><div class='output co'>#&gt; <span class='message'>[ elapsed    ]  Ran report in 0.01147246 secs</span></div><div class='output co'>#&gt; <span class='message'>[ artefact   ]  graph.png: 9918b4caa5f89dff21a92e8a4fdeb7c3</span>
#&gt; <span class='message'>[ ...        ]  info.rds: 2f8eeb9c69084f69d193b70a151ae113</span></div><div class='input'><span class='kw pkg'>orderly</span><span class='kw ns'>::</span><span class='fu'><a href='orderly_commit.html'>orderly_commit</a></span>(<span class='no'>id</span>, <span class='kw'>root</span> <span class='kw'>=</span> <span class='no'>path_remote</span>)</div><div class='output co'>#&gt; <span class='message'>[ commit     ]  use_dependency/20200403-103544-0c2911e3</span></div><div class='output co'>#&gt; <span class='message'>[ copy       ]</span></div><div class='output co'>#&gt; <span class='message'>[ import     ]  use_dependency:20200403-103544-0c2911e3</span></div><div class='output co'>#&gt; <span class='message'>[ success    ]  :)</span></div><div class='output co'>#&gt; [1] "/tmp/Rtmp9iZLVY/file3d210fa02d/archive/use_dependency/20200403-103544-0c2911e3"</div><div class='input'>
<span class='co'># We'll create a an object to interact with this remote using</span>
<span class='co'># orderly_remote_path.</span>
<span class='no'>remote</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>orderly</span><span class='kw ns'>::</span><span class='fu'><a href='orderly_remote_path.html'>orderly_remote_path</a></span>(<span class='no'>path_remote</span>)

<span class='co'># We can use this object directly</span>
<span class='no'>remote</span>$<span class='fu'>list_reports</span>()</div><div class='output co'>#&gt;  [1] "changelog"          "connection"         "global"            
#&gt;  [4] "html"               "interactive"        "minimal"           
#&gt;  [7] "multi-artefact"     "multifile-artefact" "other"             
#&gt; [10] "slow1"              "slow10"             "slow3"             
#&gt; [13] "spaces"             "use_dependency"     "use_dependency_2"  
#&gt; [16] "use_resource"       "use_resource_dir"   "view"              </div><div class='input'><span class='no'>remote</span>$<span class='fu'>list_versions</span>(<span class='st'>"other"</span>)</div><div class='output co'>#&gt; [1] "20200403-103543-c8f58c87"</div><div class='input'>
<span class='co'># More typically one will interact with the functions</span>
<span class='co'># orderly_pull_archive and orderly_pull_dependencies.</span>

<span class='co'># Now, suppose that you have your "local" copy of this; it shares</span>
<span class='co'># the same source (ordinarily these would both be under version</span>
<span class='co'># control with git):</span>
<span class='no'>path_local</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>orderly</span><span class='kw ns'>::</span><span class='fu'><a href='orderly_example.html'>orderly_example</a></span>(<span class='st'>"demo"</span>)

<span class='co'># If we wanted to run the report "use_dependency" we need to have</span>
<span class='co'># a copy of the report "other", on which it depends:</span>
<span class='fu'><a href='https://rdrr.io/r/base/try.html'>try</a></span>(<span class='kw pkg'>orderly</span><span class='kw ns'>::</span><span class='fu'><a href='orderly_run.html'>orderly_run</a></span>(<span class='st'>"use_dependency"</span>, <span class='kw'>root</span> <span class='kw'>=</span> <span class='no'>path_local</span>))</div><div class='output co'>#&gt; <span class='message'>[ name       ]  use_dependency</span></div><div class='output co'>#&gt; Error in orderly_find_report(id, name, config, draft = use_draft, must_work = TRUE) : 
#&gt;   Did not find archive report other:latest</div><div class='input'>
<span class='co'># We can "pull" depenencies of a report before running</span>
<span class='kw pkg'>orderly</span><span class='kw ns'>::</span><span class='fu'>orderly_pull_dependencies</span>(<span class='st'>"use_dependency"</span>, <span class='kw'>remote</span> <span class='kw'>=</span> <span class='no'>remote</span>,
                                   <span class='kw'>root</span> <span class='kw'>=</span> <span class='no'>path_local</span>)</div><div class='output co'>#&gt; <span class='message'>[ depends    ]  use_dependency has 1 dependency</span></div><div class='output co'>#&gt; <span class='message'>[ pull       ]  other:20200403-103543-c8f58c87</span></div><div class='output co'>#&gt; <span class='message'>[ import     ]  other:20200403-103543-c8f58c87</span></div><div class='input'>
<span class='co'># Now we can run the report because we have a local copy of the</span>
<span class='co'># dependency:</span>
<span class='kw pkg'>orderly</span><span class='kw ns'>::</span><span class='fu'><a href='orderly_run.html'>orderly_run</a></span>(<span class='st'>"use_dependency"</span>, <span class='kw'>root</span> <span class='kw'>=</span> <span class='no'>path_local</span>)</div><div class='output co'>#&gt; <span class='message'>[ name       ]  use_dependency</span></div><div class='output co'>#&gt; <span class='message'>[ id         ]  20200403-103544-72043623</span></div><div class='output co'>#&gt; <span class='message'>[ depends    ]  other@20200403-103543-c8f58c87:summary.csv -&gt; incoming.csv</span></div><div class='output co'>#&gt; <span class='message'>[ start      ]  2020-04-03 10:35:44</span></div><div class='output co'>#&gt; 
#&gt; &gt; d &lt;- read.csv("incoming.csv", stringsAsFactors = FALSE)
#&gt; 
#&gt; &gt; png("graph.png")
#&gt; 
#&gt; &gt; par(mar = c(15, 4, 0.5, 0.5))
#&gt; 
#&gt; &gt; barplot(setNames(d$number, d$name), las = 2)</div><div class='output co'>#&gt; 
#&gt; &gt; dev.off()
#&gt; pdf 
#&gt;   2 
#&gt; 
#&gt; &gt; info &lt;- orderly::orderly_run_info()
#&gt; 
#&gt; &gt; saveRDS(info, "info.rds")</div><div class='output co'>#&gt; <span class='message'>[ end        ]  2020-04-03 10:35:44</span></div><div class='output co'>#&gt; <span class='message'>[ elapsed    ]  Ran report in 0.01278996 secs</span></div><div class='output co'>#&gt; <span class='message'>[ artefact   ]  graph.png: 9918b4caa5f89dff21a92e8a4fdeb7c3</span>
#&gt; <span class='message'>[ ...        ]  info.rds: cb636214f3f67b7d306caac0ee0fe103</span></div><div class='output co'>#&gt; [1] "20200403-103544-72043623"</div><div class='input'>
<span class='co'># We can also directly pull previously run reports:</span>
<span class='kw pkg'>orderly</span><span class='kw ns'>::</span><span class='fu'>orderly_pull_archive</span>(<span class='st'>"use_dependency"</span>, <span class='no'>id</span>, <span class='kw'>remote</span> <span class='kw'>=</span> <span class='no'>remote</span>,
                              <span class='kw'>root</span> <span class='kw'>=</span> <span class='no'>path_local</span>)</div><div class='output co'>#&gt; <span class='message'>[ pull       ]  use_dependency:20200403-103544-0c2911e3</span></div><div class='output co'>#&gt; <span class='message'>[ depends    ]  other/20200403-103543-c8f58c87</span></div><div class='output co'>#&gt; <span class='message'>[ pull       ]  other:20200403-103543-c8f58c87 already exists, skipping</span></div><div class='output co'>#&gt; <span class='message'>[ import     ]  use_dependency:20200403-103544-0c2911e3</span></div><div class='input'><span class='kw pkg'>orderly</span><span class='kw ns'>::</span><span class='fu'><a href='orderly_list_drafts.html'>orderly_list_archive</a></span>(<span class='kw'>root</span> <span class='kw'>=</span> <span class='no'>path_local</span>)</div><div class='output co'>#&gt;             name                       id
#&gt; 1          other 20200403-103543-c8f58c87
#&gt; 2 use_dependency 20200403-103544-0c2911e3</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Rich FitzJohn, Robert Ashton, Alex Hill, Martin Eden, Wes Hinsley, Emma Russell, James Thompson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


